{"ast":null,"code":"var _jsxFileName = \"/Users/aaronsmith/development/code/phase-4/cocktail-creator/client/src/components/FavoriteButton.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"./LoginContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction FavoriteButton({\n  drinkId,\n  email\n}) {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [userFavoriteDrinks, setUserFavoriteDrinks] = useState([]);\n  const [isDrinkFavorited, setIsDrinkFavorited] = useState(false);\n\n  // Load favorited drinks from localStorage on component mount\n  useEffect(() => {\n    fetchUserFavoriteDrinks();\n  }, []);\n\n  // Fetch user's favorite drinks\n  const fetchUserFavoriteDrinks = async () => {\n    try {\n      const response = await fetch(\"user_favorite_drinks_button\");\n      if (response.ok) {\n        const userDrinkData = await response.json();\n        setUserFavoriteDrinks(userDrinkData);\n      }\n    } catch (error) {\n      console.error(\"An error occurred while fetching favorite drinks:\", error);\n    }\n  };\n\n  // Update isDrinkFavorited whenever userFavoriteDrinks or drinkId changes\n  useEffect(() => {\n    setIsDrinkFavorited(userFavoriteDrinks.some(favoriteDrink => favoriteDrink.drink_id === drinkId));\n  }, [userFavoriteDrinks, drinkId]);\n  const handleFavoriteClick = async () => {\n    try {\n      if (isDrinkFavorited) {\n        // If already favorited, send a DELETE request to remove it from favorites on the server\n        const response = await fetch(`/user_favorite_drinks/${drinkId}`, {\n          method: \"DELETE\"\n        });\n        if (response.ok) {\n          // Remove the drink from the user's favorite drinks list in local storage\n          setUserFavoriteDrinks(prevFavoriteDrinks => prevFavoriteDrinks.filter(FavoriteDrink => FavoriteDrink.drink_id !== drinkId));\n        } else {\n          console.error(\"Failed to remove drink from favorites on the server\");\n        }\n      } else {\n        // If not favorited, send a POST request to add it to favorites on the server\n        const response = await fetch(\"/favorite_drinks\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            email,\n            drinkId\n          })\n        });\n        if (response.ok) {\n          // Add the drink to the user's favorite drink list in local storage\n          setUserFavoriteDrinks(prevFavoriteDrinks => [...prevFavoriteDrinks, {\n            drink_id: drinkId\n          }]);\n        } else {\n          console.error(\"Failed to add drink to favorites on the server\");\n        }\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n  // console.log(userFavoriteDrinks)\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: user ? /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: handleFavoriteClick,\n      children: isDrinkFavorited ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          id: \"unfavorite-button\",\n          src: \"/images/buttons/unfavorite-button.png\",\n          alt: \"unfavorite-button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 31\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          id: \"unfavorite-button\",\n          src: \"/images/buttons/favorite-button.png\",\n          alt: \"favorite-button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(FavoriteButton, \"WddsiFrVn9jI3sqENDJu+G+IMkI=\", false, function () {\n  return [useAuth];\n});\n_c = FavoriteButton;\nexport default FavoriteButton;\nvar _c;\n$RefreshReg$(_c, \"FavoriteButton\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","jsxDEV","_jsxDEV","FavoriteButton","drinkId","email","_s","user","userFavoriteDrinks","setUserFavoriteDrinks","isDrinkFavorited","setIsDrinkFavorited","fetchUserFavoriteDrinks","response","fetch","ok","userDrinkData","json","error","console","some","favoriteDrink","drink_id","handleFavoriteClick","method","prevFavoriteDrinks","filter","FavoriteDrink","headers","body","JSON","stringify","children","onClick","id","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/aaronsmith/development/code/phase-4/cocktail-creator/client/src/components/FavoriteButton.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"./LoginContext\";\n\nfunction FavoriteButton({ drinkId, email }) {\n  const { user } = useAuth();\n  const [userFavoriteDrinks, setUserFavoriteDrinks] = useState([]);\n  const [isDrinkFavorited, setIsDrinkFavorited] = useState(false);\n\n  // Load favorited drinks from localStorage on component mount\n  useEffect(() => {\n    fetchUserFavoriteDrinks();\n  }, []);\n\n  // Fetch user's favorite drinks\n  const fetchUserFavoriteDrinks = async () => {\n    try {\n      const response = await fetch(\"user_favorite_drinks_button\");\n\n      if (response.ok) {\n        const userDrinkData = await response.json();\n        setUserFavoriteDrinks(userDrinkData);\n      }\n    } catch (error) {\n      console.error(\"An error occurred while fetching favorite drinks:\", error);\n    }\n  };\n\n  // Update isDrinkFavorited whenever userFavoriteDrinks or drinkId changes\n  useEffect(() => {\n    setIsDrinkFavorited(\n      userFavoriteDrinks.some((favoriteDrink) => favoriteDrink.drink_id === drinkId)\n    );\n  }, [userFavoriteDrinks, drinkId]);\n\n  const handleFavoriteClick = async () => {\n    try {\n      if (isDrinkFavorited) {\n        // If already favorited, send a DELETE request to remove it from favorites on the server\n        const response = await fetch(`/user_favorite_drinks/${drinkId}`, {\n          method: \"DELETE\",\n        });\n        if (response.ok) {\n          // Remove the drink from the user's favorite drinks list in local storage\n          setUserFavoriteDrinks((prevFavoriteDrinks) =>\n          prevFavoriteDrinks.filter((FavoriteDrink) => FavoriteDrink.drink_id !== drinkId)\n          );\n        } else {\n          console.error(\"Failed to remove drink from favorites on the server\");\n        }\n      } else {\n        // If not favorited, send a POST request to add it to favorites on the server\n        const response = await fetch(\"/favorite_drinks\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ email, drinkId }),\n        });\n        if (response.ok) {\n          // Add the drink to the user's favorite drink list in local storage\n          setUserFavoriteDrinks((prevFavoriteDrinks) => [\n            ...prevFavoriteDrinks,\n            { drink_id: drinkId },\n          ]);\n        } else {\n          console.error(\"Failed to add drink to favorites on the server\");\n        }\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n  // console.log(userFavoriteDrinks)\n  return (\n    <div>\n      {user ? (\n        <div onClick={handleFavoriteClick}>\n          {isDrinkFavorited ? <div>\n        <img\n          id=\"unfavorite-button\"\n          src=\"/images/buttons/unfavorite-button.png\"\n          alt=\"unfavorite-button\"\n        />\n      </div> : <div>\n        <img\n          id=\"unfavorite-button\"\n          src=\"/images/buttons/favorite-button.png\"\n          alt=\"favorite-button\"\n        />\n      </div>}\n        </div>\n      ) : (\n        <div></div>\n      )}\n    </div>\n  );\n}\n\nexport default FavoriteButton;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}